<!-- Dan Perlman, dmp359@drexel.edu
CS530: DUI, Project -->

{% extends 'base.html' %}
{% set active = "Sheets" %}

{% block title %}
Sheets
{% endblock %}

{% block content %}

<section>
    <div class="content">
        <div class="row flex-grow-1">
            <div style="float: left" class="no-float">
                <div class="btn-group-vertical">
                    <!--TOOD: Generate from iterable data from Flask-->
                    <button type="button" style="width: 300px" class="btn btn-primary active">
                        <span style="float: left">All the Things You Are</span>
                        <span style="float: middle">|</span>
                        <span style="float: right">Ballad</span>
                    </button>
                    <button type="button" class="btn btn-primary">
                        <span style="float: left">Autumn Leaves</span>
                        <span style="float: middle">|</span>
                        <span style="float: right">Swing</span>
                    </button>
                    <button type="button" class="btn btn-primary">
                        <span style="float: left">The Girl from Ipanema</span>
                        <span style="float: middle">|</span>
                        <span style="float: right">Bossa Nova</span>
                    </button>
                </div>
            </div>
            <div style="float:center">
                <div id="pdf-content"></div>
            </div>
            <form action="/api/sheets" method="POST" enctype="multipart/form-data">

                <label for="user_file">Upload Your File</label>
                <br />
                <input type="file" name="user_file">
                <br />
                <button type="submit">Upload</button>
        
            </form>
        </div>
    </div>
</section>
<script>
    function renderPDF(pdf) {
        const options = {
            pdfOpenParams: { view: 'FitV'}
        };
        PDFObject.embed(pdf,'#pdf-content', options);
    }

    // Check api for urls for this user
    let pdf = 'https://www.swiss-jazz.ch/standards-jazz/Spain.pdf';
    $.get("/api/sheets", (data) => {
        if (data.urls.length > 0) {
            pdf=data.urls[0];
        }
        renderPDF(pdf);
    });
    $('button').click(function() {
        $('button').removeClass('active');
        $(this).addClass('active');
    });
</script>
{% endblock %}
