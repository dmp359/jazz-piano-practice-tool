{% extends 'base.html' %}
{% set active = "Adopt" %}

{% block title %}
Adopt a Goat
{% endblock %}

{% block content %}

<h1>Adopt a Goat</h1>

<p>
    Please see our awesome goats below and adopt one today!
</p>

<div id="cards" class="container">

</div>

<script>

    let goatsPerColumn = 3;
    var goatsPerPage = 3;

    function updateCards(goats) {
        for (var i = 0; i < goats.length; i++) {
            let goat = goats[i];
            let card = $('<div>').addClass('card')
                .append(
                    $('<img>').addClass('card-img-top').attr('src', '/course/img/goats/' + goat.image)
                ).append(
                    $('<p>').addClass('card-body')
                        .append(
                            $('<h5>').addClass('card-title').text(goat.name)
                        ).append(
                            $('<p>').addClass('card-text').text(goat.age + ' years old')
                        ).append(
                            $('<a>').addClass('btn btn-primary').text('Adopt')
                        )
                );
            if (i % goatsPerColumn == 0)
                $('#cards').append(
                    $('<div>').addClass('card-deck')
                );
            $('#cards .card-deck').last().append(card);
        }
    }

    $(function () {
        $.get("api/goats", { n: goatsPerPage, offset: 0 }, function (goats) {
            updateCards(goats);
        });
    });

</script>

{% endblock %}